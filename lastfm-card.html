<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer-ajax/polymer-ajax.html">

<!--
Element that provide basic last.fm info based on a given user.

##### Example

    <lastfm-card></lastfm-card>

@element lastfm-card
@blurb Element that provide basic last.fm info based on a given user.
@status alpha
@homepage http://Granze.github.io/lastfm-card
-->
<polymer-element name="lastfm-card" attributes="user theme latest">

  <template>
    <link rel="stylesheet" href="../normalize-css/normalize.css">
    <link rel="stylesheet" href="lastfm-card.css">

    <polymer-ajax url="http://ws.audioscrobbler.com/2.0/?method=user.getinfo&user={{user}}&api_key=d8cacd3e0cc258e27cf95e491f65760d&format=json" auto handleAs="json" response="{{data}}"></polymer-ajax>

    <content>
      <div class="card">
        <header>
          <a href="http://www.last.fm" class="logo"></a>
          <h2><a href="{{data.user.url}}">{{data.user.name}}</a></h2>
        </header>
        <section class="personal-info">
          <span class="frame">
            <img src="{{data.user.image[2]['#text']}}" alt="">
          </span>
          <p>{{data.user.country}}</p>
          <p>{{data.user.age}}</p>
          <p>Played {{data.user.playcount}} songs since {{data.user.registered['#text']}}</p>
        </section>
      </div>
    </content>

  </template>

  <script>

    Polymer('lastfm-card', {
      /**
       * The `user` attribute is the only needed parameter.
       *
       * @attribute user
       * @type string
       */
      user: 'granzebru',
      /**
       * The `theme` attribute specify the widget color. You have two options: `red` (default) or `black`.
       *
       * @attribute theme
       * @type string
       */
      theme: 'red',
      /**
       * The `latest` attribute specify if you want to show the latest played tracks.
       *
       * @attribute theme
       * @type boolean
       */
      latest: true,

      ready: function() {

      }

    });

  </script>

</polymer-element>
